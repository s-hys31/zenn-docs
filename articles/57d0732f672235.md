---
title: "技術選定における思考プロセス"
emoji: "💨"
type: "idea"
topics: []
published: false
---

## 対象読者

小・中規模の開発の仕事における技術選定の仕方に悩んでいる人

## マインド

技術選定を行うにあたって、何気に認識・共有されていないといけないものはこのマインドだと考えています。
私は技術選定について、大まかに以下のような思想を軸にしています。

- できうる限りその時に最適な技術選定を模索する
- ただし、技術選定は常に変更してもよい

プロジェクトの初動に関しては、かなり大きめの開発活動になるのでできる限り最適な技術選定というのを模索したほうがいいと考えます。
ただし、そもそも最適な技術選定は時代によって変わります。今日の最適な技術選定が明日も最適だとは限りません。

極論、技術選定というのは開発が続く限り常に発生するものです。必要とあればマイグレーションプランを立てて移行することも考えたり、逆にどれだけ新しく良いものが出ても状況によって変更はしないということも当然あり得ます。（というよりその場合のほうが多い）

完璧な技術選定を模索する気持ちと、技術選定は変わっていってもよいという気持ち。
この一見矛盾するメンタリズムを両立させることが大切です。

## プロセス

1. 情報収集
2. ドメイン特化のライブラリの比較
3. エコシステムの比較
4. 技術差異の比較
5. 思想の比較
6. 組織環境に照らし合わせる
    - 開発スタッフのスキルレベル
    - 開発規模

## 情報収集

とにもかくにもこれが一番大事だったりします。
できうる限り判断に利用できる一時ソースをインプットします。
仕事であれば資料をまとめるのもいいでしょう。

個人的には以下のような軸で集めることが多いです。

- 基本情報
- 技術的長所・短所
- 一般的に普及している適用範囲
- 技術思想

## ドメイン特化のライブラリの比較

標準化・デファクトスタンダードになっている開発対象のライブラリが、それぞれの比較対象に存在するか、それらの比較をします。

この時点ではあくまで比較を行うだけです。メンテナンスされているか、メンテナーの体制や、パフォーマンスや計算方法などです。

ドメイン特化の内容については、そもそも『ライブラリを利用するべきか』という視点が存在します。事業のドメインに近いものを外部の開発体制に依存するのはリスクを伴うものだからです。
この辺りはプロジェクトの方針で判断基準がかなり変動するものなので、最後にまとめて考えます。

個人的には、事業ドメインに近いものは自分たちで開発するほうが外部への依存を減らせてよいと思います。

## エコシステムの比較

これもよく言われるもので、昨今の技術に関してはその技術単体ではなく、その技術が構築しているコミュニティなども含めて考えなければいけません。

エコシステムを構成するものはいろいろありますが、私は以下のような視点でよく見ています。

- コミュニティに関わっている人数（相対的な比較）
- コミュニティの総数に対するメンテナーの人数
- 開発に必要な標準的な内容のライブラリが存在しているか
- 継続的にメンテナンスが行われているか
- 開発体制
- コミュニティの経済状況など、持続可能性が確保されているか
- 変更が頻繁に発生しているか

一つ注意する点は、これらはその技術の絶対的な優劣を決めるわけではないということです。
例えば持続可能性の低さと天秤にかけてもその技術を選ぶべき場合というのもあります。

## 技術的差異の比較

この辺りが、純粋に技術の比較になる部分だと思います。
React と Vue.jsみたいな比較だと技術的差異は一般利用者レベルではないかもしれません。
データ保存に用いる技術という命題で、RDBとNoSQL（例：MongoDB）などの比較だとやる意味があります。

この時に気を付けるのは事実を陳列すること、そして一つの比較内容だけをみて優劣を決めないことです。

NoSQLが分かりやすいですが、適用領域を絞ることでパフォーマンスに特化させているもの、必然的にRDBと比較して意図的にできないようにしていることがあります。もちろん逆もしかりです。
まあこの場合、そもそもRDBとNoSQLを同じ土台で語るのがだめだという気もしますが、ここはまだ言語化できていません。

正しい技術の比較をするときは、前提条件を極度に抽象化も具体化もしないことが大事なのだと思いますが、その基準は現在も模索中です。

## 思想の比較

技術的差異の比較の派生になりますが、その技術の根本にある思想というのも組織における技術選定には大事です。
最近の筆者が体験した具体的な例だと、React Router と TanStack Router があります。

あくまでこれは参考のための大雑把な例として扱いますが、大きな区分けとして以下のような感じになっていると考えます。

| ライブラリ名 | 思想 |
| ------------ | ---- |
| React Router | Web 標準 |
| TanStack Router | 開発者体験（DX） |

どちらを優先すべきかはプロジェクトによって変わりますが、思想は今後のメンテナンスや機能拡張の方向性もあらわすものなので、わかる範囲で収集します。

## 組織環境に照らし合わせる

ここが技術選定で何気に軽視されがちでそして大体失敗する（当社比）ところです。

ここでやることですが、案件しかりプロジェクトしかり、とにかく組織に発生している変数を徹底的にあぶりだします。具体的には以下のような感じです。

- 体系的に言語などを学習しているスタッフは少ない（実地による経験が多い）
- 組織全体として開発に利用されている母数はTypeScriptが多い（メンテナンス可能な人材がほかの言語に比べて比較的確保できる）
- 納期が比較的に短い

などなど、アサインされているスタッフの傾向や、受託開発の場合は顧客の特性などもとにかく洗い出します。

ここまでくれば、あとは各変数についてひたすら掘り下げていって、選定対象の技術に結び付けていく作業です。

規模間としては小さいですが、例えば React Router or TanStack Router を組織に適用して行う場合、以下のような推論が成り立つ……かもしれません。

- 組織スタッフが一定の Web 標準の知識を抑えている
- 長期運用が見込まれる -> 出来うる限り持続可能性があるものが望ましい

↓

React Router が望ましい……かも？

- 開発者体験を上げることでプロジェクトへの定着率を上げたい
- 型による保護を実施することで、無意識下でのバグを減らしたい

↓

TanStack Router が望ましい……かも？

さて、ここまで見てガバガバ理論じゃないかと思われた方もいると思いますが、まぁその通りです。
というのも今回は一対一の推論をしていますが、推論は複合要因で行われるのが常ですし、言語化できない組織的変数なんて言うのは五万とあるので、同じ事実からでもそれらの暗黙知を適用することで推論結果が真逆になることなどめずらしくもないからです。

身もふたもないことを言ってしまうと、わかりやすいどこにでも適用できる技術選定フローなどあまりありません。正確には徹底的に言語化してやればできるかもしれませんが、ぶっちゃけ小規模中規模プロジェクトだとそこまでしたところでメリットがあまりないです。

例えばの話、React Router の採用理由について、『組織スタッフが一定の Web 標準の知識を抑えている』というのを入れましたが、逆に『組織スタッフが体系的な知識を抑えていない』場合でも、ここに教育コストという視点を入れると、『Web 標準順守のほうが今後ほかプロジェクトでもスケールしやすい』みたいな推論ができて、結果同じ結論になったりもします。
他にも『そのライブラリがメンテ終了したらどうせ血反吐を吐きながら移行すればいいだけだから、だったら開発者体験を上げたほうがいい』みたいな感じで TanStack Router を採用することもあるかもです。これには暗黙知として『割と筋肉でなんとかできるスタッフがいる』とかが含まれているかもしれません。

ともかく、ここで言いたいのはこの項目に関してはとにかく不特定多数の変数を考慮した推論力が試されるということです。

そのうえで、より最適な技術選定を目指すために、これらの推論をきちんと言語化して、リポジトリのADRだったりとして、その理由をまとめておきましょう。
ぶっちゃけ技術選定はそこが一番大事だと思います。